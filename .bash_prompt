if [[ $COLORTERM = gnome-* && $TERM = xterm ]]  && infocmp gnome-256color >/dev/null 2>&1; then export TERM=gnome-256color
elif [[ $TERM != dumb ]] && infocmp xterm-256color >/dev/null 2>&1; then export TERM=xterm-256color
fi

[ -n "$TMUX" ] && export TERM=screen-256color

function _update_ps1() {
   export PS1="$(~/powerline-shell.py --mode='flat' $?)"
}

export PROMPT_COMMAND="_update_ps1"
